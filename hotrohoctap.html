<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C3 | Chatbot AI ƒêa NƒÉng</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#4f46e5',
                        secondary: '#1e1b4b',
                        dark: {
                            bg: '#0f172a',
                            text: '#e2e8f0',
                            sidebar: '#1e293b',
                            hover: '#334155'
                        }
                    },
                    fontFamily: {
                        sans: ['Calibri', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Calibri', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .typing-dots::after {
            content: '...';
            animation: typing 1.5s infinite;
        }
        
        @keyframes typing {
            0% { content: '.'; }
            33% { content: '..'; }
            66% { content: '...'; }
        }
        
        .code-block {
            position: relative;
            margin: 1rem 0;
            border-radius: 0.75rem;
            overflow: hidden;
            background-color: #1e293b;
        }
        
        .code-header {
            font-family: monospace;
            user-select: none;
        }
        
        .copy-code-btn {
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .copy-code-btn:hover {
            color: #ffffff;
        }
        
        pre {
            margin: 0 !important;
            padding: 1rem !important;
            background-color: #1e293b !important;
            border-radius: 0 0 0.75rem 0.75rem;
        }
        
        .markdown p {
            margin-bottom: 1rem;
            line-height: 1.6;
        }
        
        .markdown ul, .markdown ol {
            margin-bottom: 1rem;
            padding-left: 1.5rem;
        }
        
        .markdown li {
            margin-bottom: 0.5rem;
        }
        
        .markdown code:not(pre code) {
            background-color: #334155;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-family: monospace;
            color: #e2e8f0;
        }
        
        .markdown strong {
            font-weight: 600;
        }
        
        .markdown em {
            font-style: italic;
        }
        
        .markdown h1, .markdown h2, .markdown h3, .markdown h4 {
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .markdown h1 {
            font-size: 1.5rem;
            line-height: 2rem;
        }
        
        .markdown h2 {
            font-size: 1.25rem;
            line-height: 1.75rem;
        }
        
        .markdown h3 {
            font-size: 1.125rem;
            line-height: 1.75rem;
        }
        
        .markdown h4 {
            font-size: 1rem;
            line-height: 1.5rem;
        }
        
        .markdown table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
            border-radius: 0.75rem;
            overflow: hidden;
        }
        
        .markdown th, .markdown td {
            padding: 0.5rem 1rem;
            border: 1px solid #334155;
            text-align: left;
        }
        
        .markdown th {
            background-color: #1e293b;
            font-weight: 600;
        }
        
        .markdown blockquote {
            border-left: 4px solid #475569;
            padding-left: 1rem;
            margin: 1rem 0;
            color: #94a3b8;
            border-radius: 0.75rem;
            background-color: rgba(30, 41, 59, 0.5);
        }
        
        .user-message {
            align-self: flex-end;
            background-color: #4f46e5;
            border-radius: 1rem;
            max-width: 80%;
            margin-left: auto;
            padding: 0.75rem;
        }
        
        .bot-message {
            align-self: flex-start;
            background-color: #1e293b;
            border-radius: 1rem;
            max-width: 80%;
            margin-right: auto;
            padding: 0.75rem;
        }
        
        .typing-indicator {
            align-self: flex-start;
            background-color: #1e293b;
            border-radius: 1rem;
            max-width: 80%;
            margin-right: auto;
            padding: 0.75rem;
        }
        
        .message-content {
            word-wrap: break-word;
            white-space: pre-wrap;
            border-radius: 0.5rem;
            padding: 0.5rem;
        }
        
        .transition-all {
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
        }
        
        .university-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        
        .university-table th, .university-table td {
            padding: 0.75rem;
            border: 1px solid #334155;
            text-align: left;
        }
        
        .university-table th {
            background-color: #1e293b;
            font-weight: 600;
        }
        
        .university-table tr:nth-child(even) {
            background-color: #1a2332;
        }
        
        .suggestion-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin: 1rem 0;
        }
        
        .suggestion-chip {
            background-color: #4f46e5;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 1rem;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background-color 0.2s;
        }
        
        .suggestion-chip:hover {
            background-color: #4338ca;
        }
    </style>
</head>
<body class="h-screen flex flex-col bg-dark-bg text-dark-text transition-all">

    <div id="app" class="flex flex-1 overflow-hidden">

        <div id="sidebar" class="w-48 bg-dark-sidebar shadow-lg border-r border-gray-700 flex flex-col h-full">

            <div class="p-3">
                <button id="new-chat-btn" class="w-10 h-10 flex items-center justify-center bg-primary hover:bg-primary/90 text-white rounded-md transition">
                    <i class="fa-solid fa-file-circle-plus"></i>
                </button>
            </div>
            

            <div id="chat-history" class="flex-1 overflow-y-auto hide-scrollbar p-2">

            </div>
        </div>
        

        <div class="flex-1 flex flex-col h-full overflow-hidden">

            <header class="p-4 border-b border-gray-700 bg-dark-bg">
                <h1 class="text-xl font-semibold text-left">C3 | Chatbot AI ƒêa NƒÉng</h1>
            </header>
            

            <div id="chat-container" class="flex-1 overflow-y-auto hide-scrollbar p-4 bg-gray-900 flex flex-col gap-3">
                <div id="chat-messages" class="flex flex-col gap-3 mx-auto max-w-3xl w-full">

                </div>
            </div>
            

            <div id="typing-indicator" class="hidden max-w-3xl mx-auto p-4 mb-4">
                <span class="typing-dots">AI ƒëang suy nghƒ©, vui l√≤ng ƒë·ª£i gi√¢y l√°t</span>
            </div>
            <div id="stop-button-container" class="hidden max-w-3xl mx-auto p-4 mb-4">
                <button id="stop-response-btn" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded text-sm">
                    D·ª´ng
                </button>
            </div>

            <div class="p-4 border-t border-gray-700 bg-dark-bg">
                <div class="max-w-3xl mx-auto">
                    <div id="suggestions" class="suggestion-chips mb-2">
                        <div class="suggestion-chip" data-query="G·ª£i √Ω tr∆∞·ªùng ƒë·∫°i h·ªçc">üéì ƒê·∫°i h·ªçc</div>
                        <div class="suggestion-chip" data-query="Tr∆∞·ªùng ·ªü H√† N·ªôi">üìç H√† N·ªôi</div>
                        <div class="suggestion-chip" data-query="Tr∆∞·ªùng ·ªü TP.HCM">üìç TP.HCM</div>
                        <div class="suggestion-chip" data-query="Tr∆∞·ªùng c√¥ng l·∫≠p">üèõÔ∏è C√¥ng l·∫≠p</div>
                    </div>
                    <form id="chat-form" class="relative">
                        <textarea 
                            id="message-input" 
                            class="w-full p-4 rounded-lg border border-gray-600 bg-dark-hover resize-none focus:outline-none focus:ring-2 focus:ring-primary text-white"
                            placeholder="Nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n ·ªü ƒë√¢y..."
                            rows="1"
                        ></textarea>
                        <button type="submit" class="absolute right-2 bottom-2 bg-primary hover:bg-primary/90 text-white p-2 rounded-md">
                            <i class="fa-solid fa-paper-plane"></i>
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    

    <script>
        // Danh s√°ch c√°c tr∆∞·ªùng ƒë·∫°i h·ªçc Vi·ªát Nam
        const universities = [
            { name: "ƒê·∫°i h·ªçc Qu·ªëc gia H√† N·ªôi", code: "QHQ", area: "H√† N·ªôi", type: "C√¥ng l·∫≠p", rank: "ƒê·∫°i tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Qu·ªëc gia TP.HCM", code: "QSC", area: "TP.HCM", type: "C√¥ng l·∫≠p", rank: "ƒê·∫°i tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc B√°ch khoa H√† N·ªôi", code: "BKA", area: "H√† N·ªôi", type: "C√¥ng l·∫≠p", rank: "ƒê·∫°i tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Kinh t·∫ø Qu·ªëc d√¢n", code: "KTA", area: "H√† N·ªôi", type: "C√¥ng l·∫≠p", rank: "ƒê·∫°i tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Ngo·∫°i th∆∞∆°ng", code: "NTH", area: "H√† N·ªôi", type: "C√¥ng l·∫≠p", rank: "ƒê·∫°i tr·ªçng ƒëi·ªÉm" },
            { name: "H·ªçc vi·ªán T√†i ch√≠nh", code: "HTC", area: "H√† N·ªôi", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Y H√† N·ªôi", code: "YHB", area: "H√† N·ªôi", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc S∆∞ ph·∫°m H√† N·ªôi", code: "SPH", area: "H√† N·ªôi", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc B√°ch khoa TP.HCM", code: "BKS", area: "TP.HCM", type: "C√¥ng l·∫≠p", rank: "ƒê·∫°i tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Kinh t·∫ø TP.HCM", code: "KTS", area: "TP.HCM", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc S∆∞ ph·∫°m TP.HCM", code: "SPS", area: "TP.HCM", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Y D∆∞·ª£c TP.HCM", code: "YDS", area: "TP.HCM", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc C·∫ßn Th∆°", code: "TCT", area: "Mi·ªÅn T√¢y", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc ƒê√† N·∫µng", code: "DDN", area: "Mi·ªÅn Trung", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Hu·∫ø", code: "DHT", area: "Mi·ªÅn Trung", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc FPT", code: "FPT", area: "Nhi·ªÅu c∆° s·ªü", type: "T∆∞ th·ª•c", rank: "T·ªëp ƒë·∫ßu t∆∞ th·ª•c" },
            { name: "ƒê·∫°i h·ªçc RMIT", code: "RMI", area: "TP.HCM/H√† N·ªôi", type: "Qu·ªëc t·∫ø", rank: "Qu·ªëc t·∫ø" },
            { name: "ƒê·∫°i h·ªçc T√¥n ƒê·ª©c Th·∫Øng", code: "DTT", area: "TP.HCM", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "H·ªçc vi·ªán B∆∞u ch√≠nh Vi·ªÖn th√¥ng", code: "BVN", area: "H√† N·ªôi/TP.HCM", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" },
            { name: "ƒê·∫°i h·ªçc Giao th√¥ng V·∫≠n t·∫£i", code: "GTA", area: "H√† N·ªôi/TP.HCM", type: "C√¥ng l·∫≠p", rank: "Tr·ªçng ƒëi·ªÉm" }
        ];

        class UniversityAI {
            constructor() {
                this.conversationHistory = [];
            }

            async processQuery(userInput) {
                // Gi·∫£ l·∫≠p th·ªùi gian x·ª≠ l√Ω
                await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 700));
                
                const input = userInput.toLowerCase();
                
                // X·ª≠ l√Ω c√°c c√¢u h·ªèi v·ªÅ tr∆∞·ªùng ƒë·∫°i h·ªçc
                if (input.includes("ƒë·∫°i h·ªçc") || input.includes("tr∆∞·ªùng") || input.includes("h·ªçc vi·ªán") || 
                    input.includes("tuy·ªÉn sinh") || input.includes("ƒëi·ªÉm chu·∫©n") || input.includes("ƒëh")) {
                    
                    return this.handleUniversityQuery(input);
                }
                
                // X·ª≠ l√Ω c√°c c√¢u h·ªèi th√¥ng th∆∞·ªùng kh√°c
                return this.handleGeneralQuery(input);
            }

            handleUniversityQuery(input) {
                let response = "";
                let filteredUnis = [];
                
                // T√¨m ki·∫øm theo khu v·ª±c
                if (input.includes("h√† n·ªôi") || input.includes("hn")) {
                    filteredUnis = universities.filter(uni => uni.area.includes("H√† N·ªôi"));
                    response = this.formatUniversityResponse("C√°c tr∆∞·ªùng ƒë·∫°i h·ªçc t·∫°i H√† N·ªôi:", filteredUnis);
                }
                else if (input.includes("h·ªì ch√≠ minh") || input.includes("tphcm") || input.includes("s√†i g√≤n") || input.includes("hcm")) {
                    filteredUnis = universities.filter(uni => uni.area.includes("TP.HCM"));
                    response = this.formatUniversityResponse("C√°c tr∆∞·ªùng ƒë·∫°i h·ªçc t·∫°i TP.HCM:", filteredUnis);
                }
                else if (input.includes("mi·ªÅn trung")) {
                    filteredUnis = universities.filter(uni => uni.area.includes("Mi·ªÅn Trung"));
                    response = this.formatUniversityResponse("C√°c tr∆∞·ªùng ƒë·∫°i h·ªçc mi·ªÅn Trung:", filteredUnis);
                }
                else if (input.includes("c√¥ng l·∫≠p")) {
                    filteredUnis = universities.filter(uni => uni.type === "C√¥ng l·∫≠p");
                    response = this.formatUniversityResponse("C√°c tr∆∞·ªùng ƒë·∫°i h·ªçc c√¥ng l·∫≠p:", filteredUnis);
                }
                else if (input.includes("t∆∞ th·ª•c") || input.includes("d√¢n l·∫≠p")) {
                    filteredUnis = universities.filter(uni => uni.type === "T∆∞ th·ª•c");
                    response = this.formatUniversityResponse("C√°c tr∆∞·ªùng ƒë·∫°i h·ªçc t∆∞ th·ª•c:", filteredUnis
