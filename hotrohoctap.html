<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>C3 | Chatbot AI Đa Năng</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {font-family: 'Calibri', sans-serif; background-color: #0f172a; color: #e2e8f0;}
    .hide-scrollbar::-webkit-scrollbar {display: none;}
    .hide-scrollbar {-ms-overflow-style: none; scrollbar-width: none;}
    .typing-dots::after {content: '...'; animation: typing 1.5s infinite;}
    @keyframes typing {0%{content: '.';} 33%{content: '..';} 66%{content: '...';}}
    .user-message {align-self:flex-end;background:#4f46e5;border-radius:1rem;max-width:80%;margin-left:auto;padding:.75rem;margin-bottom:.5rem;}
    .bot-message {align-self:flex-start;background:#1e293b;border-radius:1rem;max-width:80%;margin-right:auto;padding:.75rem;margin-bottom:.5rem;}
    .message-content {word-wrap:break-word;white-space:pre-wrap;}
    .suggestion-chips {display:flex;flex-wrap:wrap;gap:.5rem;margin:1rem 0;}
    .suggestion-chip {background:#4f46e5;color:white;padding:.5rem 1rem;border-radius:1rem;cursor:pointer;font-size:.9rem;transition:background .2s;}
    .suggestion-chip:hover {background:#4338ca;}
    .university-table {width:100%;border-collapse:collapse;margin:1rem 0;}
    .university-table th,.university-table td{padding:.5rem;border:1px solid #334155;text-align:left;font-size:.9rem;}
    .university-table th{background:#1e293b;font-weight:600;}
    .university-table tr:nth-child(even){background:#1a2332;}
    #typing-indicator{background:#1e293b;border-radius:1rem;padding:.75rem;margin-bottom:.5rem;max-width:80%;margin-right:auto;}
  </style>
</head>
<body class="h-screen flex flex-col bg-gray-900 text-white">
  <div class="flex flex-1 overflow-hidden">
    <!-- Sidebar -->
    <div class="w-64 bg-gray-800 shadow-lg border-r border-gray-700 flex flex-col h-full">
      <div class="p-3">
        <button id="new-chat-btn" class="w-10 h-10 flex items-center justify-center bg-indigo-600 hover:bg-indigo-700 text-white rounded-md transition">
          <i class="fa-solid fa-file-circle-plus"></i>
        </button>
      </div>
      <div id="chat-history" class="flex-1 overflow-y-auto hide-scrollbar p-2">
        <div class="text-center p-4 text-gray-400">Chưa có cuộc trò chuyện nào</div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex-1 flex flex-col h-full overflow-hidden">
      <header class="p-4 border-b border-gray-700 bg-gray-800">
        <h1 class="text-xl font-semibold text-left">C3 | Chatbot AI Đa Năng</h1>
      </header>

      <div id="chat-container" class="flex-1 overflow-y-auto hide-scrollbar p-4 bg-gray-900 flex flex-col gap-3">
        <div id="chat-messages" class="flex flex-col gap-3 mx-auto max-w-3xl w-full">
          <div class="bot-message">
            <div class="message-content">
              Xin chào! Tôi là Chatbot AI Đa Năng. Tôi có thể giúp bạn tìm hiểu về các trường đại học và nhiều chủ đề khác. Bạn cần hỗ trợ gì?
            </div>
          </div>
        </div>
      </div>

      <div id="typing-indicator" class="hidden max-w-3xl mx-auto">
        <div class="typing-indicator">
          <span class="typing-dots">AI đang suy nghĩ, vui lòng đợi giây lát</span>
        </div>
      </div>

      <div class="p-4 border-t border-gray-700 bg-gray-800">
        <div class="max-w-3xl mx-auto">
          <div id="suggestions" class="suggestion-chips mb-2">
            <div class="suggestion-chip" data-query="Gợi ý trường đại học">🎓 Đại học</div>
            <div class="suggestion-chip" data-query="Trường ở Hà Nội">📍 Hà Nội</div>
            <div class="suggestion-chip" data-query="Trường ở TP.HCM">📍 TP.HCM</div>
            <div class="suggestion-chip" data-query="Trường công lập">🏛️ Công lập</div>
          </div>
          <form id="chat-form" class="relative">
            <textarea id="message-input" class="w-full p-4 rounded-lg border border-gray-600 bg-gray-700 resize-none focus:outline-none focus:ring-2 focus:ring-indigo-500 text-white" placeholder="Nhập câu hỏi của bạn ở đây..." rows="1"></textarea>
            <button type="submit" class="absolute right-2 bottom-2 bg-indigo-600 hover:bg-indigo-700 text-white p-2 rounded-md">
              <i class="fa-solid fa-paper-plane"></i>
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script>
    const universities = [
      { name: "Đại học Quốc gia Hà Nội", code: "QHQ", area: "Hà Nội", type: "Công lập", rank: "Đại trọng điểm" },
      { name: "Đại học Quốc gia TP.HCM", code: "QSC", area: "TP.HCM", type: "Công lập", rank: "Đại trọng điểm" },
      { name: "Đại học Bách khoa Hà Nội", code: "BKA", area: "Hà Nội", type: "Công lập", rank: "Đại trọng điểm" },
      { name: "Đại học Kinh tế Quốc dân", code: "KTA", area: "Hà Nội", type: "Công lập", rank: "Đại trọng điểm" },
      { name: "Đại học Ngoại thương", code: "NTH", area: "Hà Nội", type: "Công lập", rank: "Đại trọng điểm" },
      { name: "Đại học FPT", code: "FPT", area: "Nhiều cơ sở", type: "Tư thục", rank: "Tốp đầu tư thục" },
      { name: "Đại học RMIT", code: "RMI", area: "TP.HCM/Hà Nội", type: "Quốc tế", rank: "Quốc tế" }
    ];

    const chatMessages = document.getElementById('chat-messages');
    const chatForm = document.getElementById('chat-form');
    const messageInput = document.getElementById('message-input');
    const typingIndicator = document.getElementById('typing-indicator');
    const suggestionChips = document.querySelectorAll('.suggestion-chip');

    function scrollToBottom() {
      chatMessages.scrollTop = chatMessages.scrollHeight;
    }

    function addMessage(role, content) {
      const div = document.createElement('div');
      div.className = role === 'user' ? 'user-message' : 'bot-message';
      div.innerHTML = `<div class="message-content">${content}</div>`;
      chatMessages.appendChild(div);
      scrollToBottom();
    }

    function generateResponse(message) {
      message = message.toLowerCase();
      let filtered = universities;

      if (message.includes('hà nội')) {
        filtered = filtered.filter(u => u.area.includes('Hà Nội'));
      } else if (message.includes('tp.hcm')) {
        filtered = filtered.filter(u => u.area.includes('TP.HCM'));
      } else if (message.includes('công lập')) {
        filtered = filtered.filter(u => u.type === 'Công lập');
      } else if (message.includes('tư thục')) {
        filtered = filtered.filter(u => u.type === 'Tư thục');
      }

      if (filtered.length === 0) return "Xin lỗi, tôi không tìm thấy trường nào phù hợp.";

      let table = `<div class='overflow-x-auto'><table class='university-table'><thead><tr><th>Tên trường</th><th>Mã</th><th>Khu vực</th><th>Loại</th><th>Xếp hạng</th></tr></thead><tbody>`;
      filtered.forEach(u => {
        table += `<tr><td>${u.name}</td><td>${u.code}</td><td>${u.area}</td><td>${u.type}</td><td>${u.rank}</td></tr>`;
      });
      table += `</tbody></table></div>`;
      return table;
    }

    chatForm.addEventListener('submit', e => {
      e.preventDefault();
      const msg = messageInput.value.trim();
      if (!msg) return;

      addMessage('user', msg);
      messageInput.value = '';
      typingIndicator.classList.remove('hidden');

      setTimeout(() => {
        const reply = generateResponse(msg);
        addMessage('bot', reply);
        typingIndicator.classList.add('hidden');
      }, 800);
    });

    suggestionChips.forEach(chip => {
      chip.addEventListener('click', () => {
        messageInput.value = chip.dataset.query;
        chatForm.dispatchEvent(new Event('submit'));
      });
    });
  </script>
</body>
</html>
